<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>admin</title>
  <link rel="icon" href="cover/small-logo.png">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="/adm-style.css">
  <style>
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f4f4f4; }
    h2 { color: #333; }
  </style>
</head>
<body>

  <div class="header-bar">
    <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
    <button class="open-btn msg-btn active" onclick="showBlock('msg')">–ó–∞—è–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤</button>
    <button class="open-btn gal-btn" onclick="showBlock('gal')">–ì–∞–ª–µ—Ä–µ—è</button>
    <button class="open-btn new-btn" onclick="showBlock('new')">–ù–æ–≤–æ—Å—Ç–∏</button>
  </div>

  <div class="block-display" id="passwordOverlay">
    <div class="password-window">
      <label for="pass">–ü–∞—Ä–æ–ª—å:</label>
      <input type="password" id="pass" name="pass">
      <button type="button" onclick="checkPassword()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>
  </div>

  <!-- –ø—Ä–∏–µ–º —Ñ–æ—Ä–º—ã, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
  <div class="fullscreen-block messages-adm-wrapper active" id="msg">
    <h2>–ó–∞—è–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
    <table id="data-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>–ò–º—è</th>
          <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
          <th>Email</th>
          <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
          <th>–°–æ–æ–±—â–µ–Ω–∏–µ</th>
        </tr>
      </thead>
      <tbody>
        <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞ -->
      </tbody>
    </table>
  </div>

  <!-- –±–ª–æ–∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–∞–ª–µ—Ä–µ–∏ -->
  <div class="fullscreen-block galer-adm-wrapper" id="gal">
    <h2>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É</h2>
      <form action="/upload-image" method="post" enctype="multipart/form-data">
        <p>–ö–ª–∞—Å—Å –∫–∞—Ä—Ç–∏–Ω–∫–∏:
          <select name="class" required>
            <option value="electro">–≠–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</option>
            <option value="panels">–ú–æ–Ω—Ç–∞–∂ —â–∏—Ç–∫–æ–≤</option>
            <option value="video">–í–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏–µ</option>
            <option value="fire">–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–∂–∞—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</option>
            <option value="signal">–û—Ö—Ä–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏</option>
          </select>
        </p>
        <p>–§–∞–π–ª: <input type="file" name="image" accept="image/*" required></p>
        <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
      </form>

      <h2>–ì–∞–ª–µ—Ä–µ—è</h2>
        <div id="file-list">
        <p>–ó–∞–≥—Ä—É–∂–∞—é —Ñ–∞–π–ª—ã...</p>
      </div>
  </div>


  <!-- –ù–û–í–û–°–¢–ò -->
  <div class="fullscreen-block news-adm-blocb" id="new">
    <!-- add-news.html -->
    <form action="/add-news" method="POST" enctype="multipart/form-data">

        <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ: –∫–ª–∞—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ -->
      <input type="hidden" name="class" value="news">

      <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫:<br>
        <input type="text" name="title" required>
      </label><br><br>

      <label>–ê–Ω–æ–Ω—Å:<br>
        <textarea name="preview" rows="3" required></textarea>
      </label><br><br>

      <label>–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç:<br>
        <textarea name="content" rows="6" required></textarea>
      </label><br><br>

        <!-- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ -->
      <label>–§–æ—Ç–æ (–Ω–µ—Å–∫–æ–ª—å–∫–æ):<br>
        <input type="file" name="images" accept="image/*" multiple required>
      </label><br><br>

      <label>–î–∞—Ç–∞:<br>
        <input type="date" name="date" required>
      </label><br><br>

      <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å</button>
    </form>


    <div class="all-news">
      <h3>–°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π</h3>
      <div class="news-list">

      </div>
    </div>
  </div>



  <!-- <script>
    const CORRECT_PASSWORD = '12345';

    function checkPassword() {
      const input = document.getElementById('pass');
      const password = input.value;

      if (password === CORRECT_PASSWORD) {
      // –°–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ
        document.getElementById('passwordOverlay').style.display = 'none';
      // –ú–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–∫—Ç –≤—Ö–æ–¥–∞ –≤ localStorage
        // localStorage.setItem('auth', 'true');
      } else {
        alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å');
        input.value = ''; // –æ—á–∏—â–∞–µ–º
        input.focus();
      }
    }

  // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Äî –ø—Ä–æ–≤–µ—Ä–∏–º, –±—ã–ª –ª–∏ —É–∂–µ –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è
    window.addEventListener('load', () => {
      if (localStorage.getItem('auth') === 'true') {
        document.getElementById('passwordOverlay').style.display = 'none';
      }
    });

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞
    fetch('/data?t=' + Date.now())
      .then(response => response.json())
      .then(data => {
        const tbody = document.querySelector('#data-table tbody');
        
        if (data.length === 0) {
          tbody.innerHTML = '<tr><td colspan="6">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td></tr>';
          return;
        }

        data.forEach(row => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${row.id}</td>
            <td>${row.name || ''}</td>
            <td>${row.phone || ''}</td>
            <td>${row.email || ''}</td>
            <td>${row.list || ''}</td>
            <td>${row.messages || ''}</td>
          `;
          tbody.appendChild(tr);
        });
      })
      .catch(err => {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', err);
        tbody.innerHTML = '<tr><td colspan="6">‚ùå –û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</td></tr>';
      });


    fetch('/files')
      .then(response => response.json())
      .then(files => {
        const container = document.getElementById('file-list');

        if (files.length === 0) {
          container.innerHTML = '<p>–ù–µ—Ç –∫–∞—Ä—Ç–∏–Ω–æ–∫</p>';
          return;
        }

        // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–∞–ø–∫–∞–º
        const grouped = {};
        files.forEach(file => {
          const folder = file.split('/').slice(2, -1).join('/') || '–∫–æ—Ä–µ–Ω—å';
          if (!grouped[folder]) grouped[folder] = [];
          grouped[folder].push(file);
        });

      // –°–æ–∑–¥–∞—ë–º HTML
        let html = '';
        for (const [folder, imgs] of Object.entries(grouped)) {
          html += `<h3>üìÅ ${folder || '–∫–æ—Ä–µ–Ω—å'}</h3>`;
          html += `<div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;">`;
          imgs.forEach(img => {
            const filename = img.split('/').pop();
            html += `
              <div style="text-align: center; max-width: 150px;">
                <img src="${img}" width="120" alt="${filename}" style="border-radius: 6px;">
                <div style="font-size: 0.8em; color: #555; margin-top: 4px;">${filename}</div>
              </div>
            `;
          });
          html += `</div>`;
        }

        container.innerHTML = html;
      })
      .catch(err => {
        console.error('–û—à–∏–±–∫–∞:', err);
        container.innerHTML = '<p>‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã</p>';
      });
  </script> -->
</body>
<script src="adm-script.js"></script>
</html>